--CREATE CERTIFICATE FM_CERTIFICATE   
	--ENCRYPTION BY PASSWORD = 'Ucas@&123@#ONL_FM'  
	--WITH SUBJECT = 'Online Fish Market',   
	--EXPIRY_DATE = '20501231'

	--CREATE SYMMETRIC KEY FM_SYMMETRIC_KEY   
	--WITH ALGORITHM = AES_256  
	--ENCRYPTION BY CERTIFICATE FM_CERTIFICATE

--CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'Ucas@&123@#ONL_FM'
--OPEN MASTER KEY DECRYPTION BY PASSWORD='Ucas@&123@#ONL_FM'
--ALTER MASTER KEY REGENERATE WITH ENCRYPTION BY PASSWORD = 'Ucas@&123@#ONL_FM'
--CLOSE MASTER KEY

--EncryptByKey(Key_GUID('FM_SYMMETRIC_KEY'), '123456')
--CAST(DecryptByKey(U.PasswordHash) AS VARCHAR(MAX))

CREATE CERTIFICATE JS_CERTIFICATE   
	ENCRYPTION BY PASSWORD = 'Jafor15-9228@ONL_SCHOOL'  
	WITH SUBJECT = 'Js School',   
	EXPIRY_DATE = '20501231'

	CREATE SYMMETRIC KEY JS_SYMMETRIC_KEY   
	WITH ALGORITHM = AES_256  
	ENCRYPTION BY CERTIFICATE JS_CERTIFICATE

CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'Jafor15-9228@ONL_SCHOOL'

OPEN MASTER KEY DECRYPTION BY PASSWORD='Jafor15-9228@ONL_SCHOOL'
ALTER MASTER KEY REGENERATE WITH ENCRYPTION BY PASSWORD = 'Jafor15-9228@ONL_SCHOOL'
CLOSE MASTER KEY



SELECT EncryptByKey(Key_GUID('JS_SYMMETRIC_KEY'), '123456')
SELECT CAST(DecryptByKey(EncryptByKey(Key_GUID('JS_SYMMETRIC_KEY'), '123456')) AS VARCHAR(MAX))


OPEN SYMMETRIC KEY JS_SYMMETRIC_KEY
DECRYPTION BY CERTIFICATE JS_CERTIFICATE WITH PASSWORD = 'Jafor15-9228@ONL_SCHOOL'
EncryptByKey(Key_GUID('JS_SYMMETRIC_KEY'), '123456')
CAST(DecryptByKey(U.PasswordHash) AS VARCHAR(MAX))
